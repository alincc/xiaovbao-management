<div class="content__title">
  <h1>商品折扣活动</h1>
</div>

<nz-card>
  <!-- <ng-template #title>创建活动</ng-template> -->
  <ng-template #body>
    <div nz-row [nzGutter]="16">
      <label for="" class="mr-sm">折扣商品：</label>
      <button nz-button [nzType]="'primary'" class="mr-sm" (click)="toSelectGoods()">
        <span>请选择商品</span>
      </button>
    </div>
  </ng-template>
</nz-card>

<nz-card>
  <ng-template #title>商品列表</ng-template>
  <ng-template #body>
    <nz-table #nzTable [nzAjaxData]="discountActivities$ | async" 
    [nzShowSizeChanger]="true" 
    [nzLoading]="loading$ | async" 
    [nzTotal]="total$ | async"
      [(nzPageIndex)]="pageIndex" 
      (nzPageIndexChange)="pageIndexChange()" 
      [(nzPageSize)]="pageSize" 
      (nzPageSizeChange)="pageSizeChange()">
      <thead nz-thead>
        <tr>
          <th nz-th>
            <span>商品名称</span>
          </th>
          <th nz-th>
            <span>原价</span>
          </th>
          <th nz-th>
            <span>折扣</span>
          </th>
          <th nz-th>
            <span>活动价</span>
          </th>
          <th nz-th>
            <span>每单限购</span>
          </th>
          <th nz-th>
            <span>操作</span>
          </th>
        </tr>
      </thead>
      <tbody nz-tbody>
        <tr nz-tbody-tr *ngFor="let data of nzTable.data">
          
          <td nz-td>{{data.goodsName}}</td>
          <td nz-td>{{data.originalPrice}}</td>
          <td nz-td>{{data.discount}}</td>
          <td nz-td>{{data.activityPrice}}</td>
          <td nz-td>{{data.purchaseLimitCount}}</td>

          <td nz-td>
            <span>
              <a (click)="toEditGoods(data)">{{ 'edit' | translate }}</a>
              <span nz-table-divider></span>
              <nz-popconfirm [nzTitle]="'Are you sure to delete?' | translate" [nzOkText]="'ok' | translate" [nzCancelText]="'cancel' | translate"
                (nzOnConfirm)="ensureDelete(data.id)">
                <a nz-popconfirm>{{ 'delete' | translate }}</a>
              </nz-popconfirm>
            </span>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </ng-template>
</nz-card>